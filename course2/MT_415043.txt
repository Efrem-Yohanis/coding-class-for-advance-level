name

Test Case 415043: Verify 'View' button in the submission proof is enabled



Manual test case - Steps and Expected Results

Precondition: User is logged in (shared steps 413501) and a submission proof exists (or will be created) for the ABSEE deal.

Steps:
1. Navigate to the ABS-EE Deal Home and locate the deal to test.
   - Expected: The deal row is visible and shows actions (View, Delete).
2. Click the "View" action for the deal and open the "Submission Proof" area.
   - Expected: The Submission Proof section is visible with a "Create" button.
3. Click "Create" under Submission Proof and choose Yes or No when prompted to include EX-102.
   - Expected: A confirmation dialog appears: "Do you want to include the contents of the EX-102 file in the submission proof?".
4. Wait for the Submission Proof to complete (Execution Status).
   - Expected: Execution Status shows "Submission Proof completed" and "CompletedSuccessfully".
5. Verify the "View" button for the submission proof is enabled and clickable.
   - Expected: Clicking "View" opens the submission proof in a new browser tab and the content is visible.

Notes:
- Allow sufficient timeout for submission proof processing (e.g., 60â€“120s).
- Avoid repeating shared login steps in this test to prevent duplicate sessions.




Record

import { test, expect } from '@playwright/test';

test('415043 - Submission Proof View button enabled and opens proof', async ({ page, context }) => {
  const jobRow = /99 submission proof to be/; // adjust as needed

  // Go to Deals home (assumes shared login performed separately)
  await page.goto('https://13f-qa.azurewebsites.net/deals');
  await page.getByRole('button', { name: 'ABS-EE Deal Home' }).click();
  await expect(page.getByRole('heading', { name: 'ABS-EE Deal Home' })).toBeVisible();

  // Open deal
  await page.getByRole('row', { name: jobRow }).getByRole('link', { name: /view|open/i }).click();

  // Create submission proof (No flow)
  await page.getByText('Submission Proof').click();
  await page.getByRole('button', { name: 'Create' }).click();
  await expect(page.getByText(/Do you want to include the contents of the EX-102 file/i)).toBeVisible();
  await page.getByRole('button', { name: 'No' }).click();
  await expect(page.getByText(/Submission Proof completed/i)).toBeVisible({ timeout: 120_000 });

  // Verify View is enabled and opens in new tab
  const viewButton = page.getByRole('button', { name: 'View', exact: true });
  await expect(viewButton).toBeEnabled();

  const [newPage] = await Promise.all([
    context.waitForEvent('page'),
    viewButton.click(),
  ]);

  await newPage.waitForLoadState('domcontentloaded');
  await expect(newPage.locator('body')).toBeVisible();

  // Optionally test Yes flow (if EX-102 exists and should be included)
  // await page.bringToFront();
  // await page.getByRole('button', { name: 'Create' }).click();
  // await page.getByRole('button', { name: 'Yes' }).click();
  // await expect(page.getByText(/Submission Proof completed/i)).toBeVisible({ timeout: 120_000 });
});
