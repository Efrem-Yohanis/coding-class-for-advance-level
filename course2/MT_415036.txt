1. test name 
415036	Test Case	Verify user able to create new  ABSEE deal			
Manual test case - Steps and Expected Results

Precondition: User is logged in (shared steps 413501) and has access to the ABS-EE Deal Home page.

Steps:
1. Click the ABSEE Deal icon to go to the ABS-EE Deal Home landing page.
   - Expected: ABS-EE Deal Home opens.
2. Select the Company from the Company dropdown.
   - Expected: The Company value is selected.
3. Click the "Create New Deal" button.
   - Expected: The "Filings Details" form opens and contains: Job Number, Deal Name, Period End Date, Target Filing Date, Filing Type, ABS Schema Type, Create, Clone, Cancel.
4. Fill in the Filing Details (Job Number, Deal Name, Period End Date, Target Filing Date, Filing Type, ABS Schema Type) and click "Create".
   - Expected: The deal is created and appears in the home deal table.
5. Locate the newly created deal in the list and click "View".
   - Expected: The deal row shows details and actions (View, Delete) and the ABSEE Deal details page opens.
6. On the deal details page, click "Upload" and select an ABSEE input zip file.
   - Expected: Upload is accepted, the file appears in the upload queue, and the Execution Status shows completion (e.g., "CompletedSuccessfully").

Notes:
- Avoid repeating login steps in this test to prevent duplicate sessions.
- When waiting for uploads/processing, allow a generous timeout (e.g., 2 minutes) as background tasks may take time.

3. records:

import { test, expect } from '@playwright/test';

test('415036 - Create and upload ABSEE deal', async ({ page }) => {
  const jobNumber = '444';
  const dealName = 'automation 111';
  const periodEnd = '09-30-2024';
  const uploadFilePath = 'path/to/absee_input.zip'; // replace with a real path or fixture

  // Navigate to Deals home (assumes user is already logged in via shared steps)
  await page.goto('https://13f-qa.azurewebsites.net/deals');
  await page.getByRole('button', { name: 'ABS-EE Deal Home' }).click();
  await expect(page.getByRole('heading', { name: 'ABS-EE Deal Home' })).toBeVisible();

  // Create new deal
  await page.getByRole('button', { name: 'Create New Deal' }).click();
  await expect(page.getByText('Filings Details')).toBeVisible();
  await page.getByRole('textbox', { name: 'Job Number' }).fill(jobNumber);
  await page.getByRole('textbox', { name: 'Deal Name*' }).fill(dealName);
  await page.getByRole('textbox', { name: 'Period End Date*' }).fill(periodEnd);
  await page.getByLabel('ABS Schema Type*').selectOption('2');
  await page.getByRole('button', { name: 'Create', exact: true }).click();

  // Verify deal is present in the table
  await expect(page.getByRole('row', { name: new RegExp(`${jobNumber} ${dealName} ${periodEnd}`) })).toBeVisible({ timeout: 30_000 });

  // Open deal details
  await page.getByRole('row', { name: new RegExp(`${jobNumber} ${dealName} ${periodEnd}`) }).getByRole('link', { name: /view/i }).click();
  await expect(page.getByRole('heading', { name: /FILE UPLOAD DETAILS|Files/i })).toBeVisible();

  // Upload file
  const uploadButton = page.getByRole('button', { name: 'Upload' });
  await expect(uploadButton).toBeVisible();
  await uploadButton.setInputFiles(uploadFilePath);

  // Wait for processing to complete
  await page.getByText('Execution Status').click();
  await expect(page.getByText(/CompletedSuccessfully/i)).toBeVisible({ timeout: 120_000 });

  // Optionally, assert the uploaded file appears in the queue
  await expect(page.getByText(/File upload queue|Uploaded/i)).toBeVisible({ timeout: 30_000 });
});

