Test name
415058	Test Case	Verify user able to clone ABSEE deal

Manual test case - Steps and Expected Results

Precondition: User is logged in (shared steps 413501) and has access to the ABS-EE Deal Home page.

Clean, step-by-step procedure:
1. Navigate to the ABS-EE Deal Home.
   - Expected: User navigates to the ABS-EE Deal Home landing page.
2. Select the Company from the dropdown.
   - Expected: User is able to select values from the Company dropdown.
3. Click the Create New Deal button.
   - Expected: Filing Details form opens with fields: Job Number, Deal Name, Period End Date, Target Filing Date, Filing Type, ABS Schema Type, and buttons: Create, Clone, Cancel.
4. Click the 'Clone' button.
   - Expected: Clone button is enabled and user clicks successfully.
5. Verify clone deal popup appears.
   - Expected: Clone deal popup is displayed with fields: Deals dropdown, Deal Name input field, Job Number input field.
6. Select a deal from the Deals dropdown.
   - Expected: User selects the deal value from the dropdown.
7. Enter the Deal Name and Job Number details.
   - Expected: User enters deal name and job number and clicks on Yes button.
8. Verify the cloned ABSEE deal is available in the list.
   - Expected: The cloned deal is available in the home deal table.
9. Test that clone deal popup closes when user clicks No button.
   - Expected: Popup closes successfully when No button is clicked.

Notes:
- Ensure at least one existing deal is available for cloning.
- Test both successful cloning and popup dismissal scenarios.

Record (sample script):
See `course2/TC/Test_Case_415058.spec.ts` for an automated implementation.

import { test, expect } from '@playwright/test';

// 415058 - Clone ABSEE deal
// Replaces recorded noise with a focused test that verifies cloning a deal creates a new row

test('415058 - Clone ABSEE deal creates a new deal row', async ({ page }) => {
  const cloneDealName = 'Clone auto testing 111';
  const jobNumber = '12525';

  // Navigate to Deals home (login done externally)
  await page.goto('https://13f-qa.azurewebsites.net/deals');
  await page.getByRole('button', { name: 'ABS-EE Deal Home' }).click();
  await expect(page.getByRole('heading', { name: 'ABS-EE Deal Home' })).toBeVisible();

  // Open Create New Deal and use Clone
  await page.getByRole('button', { name: 'Create New Deal' }).click();
  const cloneBtn = page.getByRole('button', { name: 'Clone' });
  await expect(cloneBtn).toBeVisible();
  await cloneBtn.click();

  await expect(page.getByText('Clone Deal')).toBeVisible();

  // Select a deal to clone (option locator may be parameterized for CI)
  await page.getByText('Deals').click();
  await page.locator('#react-select-6-option-2').click();

  // Fill in cloned deal details and confirm
  await page.getByRole('textbox', { name: 'Deal Name' }).fill(cloneDealName);
  await page.getByRole('textbox', { name: 'Job Number' }).fill(jobNumber);
  await page.getByRole('button', { name: 'Yes' }).click();

  // Assert the cloned deal appears in the deals table
  await expect(page.getByRole('cell', { name: jobNumber })).toBeVisible({ timeout: 30_000 });
  await expect(page.getByText(cloneDealName)).toBeVisible({ timeout: 30_000 });
});
