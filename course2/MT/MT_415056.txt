Test name
415056	Test Case	Verify transmit live filing transmission is successful

Manual test case - Steps and Expected Results

Precondition: User is logged in (shared steps 413501) and has access to the ABS-EE Deal Home page. A deal with uploaded ABSEE files exists and has completed test filing transmission.

Clean, step-by-step procedure:
1. From the ABS-EE Deal Home, locate the target deal using Job Number or Deal Name.
   - Expected: The deal row is visible and contains 'View' and 'Delete' actions.
2. Click the 'View' link for the deal to open the Deal Details page.
   - Expected: The page opens and shows headings like 'FILE UPLOAD DETAILS' or 'Files'.
3. Verify the status at the top of the page is 'Active'. If status is loading, open the 'SEC' tab to ensure authentication tokens are populated.
   - Expected: Status reads 'Active' or SEC tab tokens are present and valid.
4. Click the 'Submit Filing' link.
   - Expected: The link is accessible and clicking navigates to the filing submission page.
5. Click the 'Submit Files' link.
   - Expected: The link is accessible and clicking initiates file submission.
6. Click the 'Transmit Test Filing' button and wait for execution to complete.
   - Expected: Execution Status shows 'SiFi filing completed successfully. Status: Accepted. Accession Number: [pattern] SEC Message: Subject: ACCEPTE...'.
7. Verify the 'Transmit Live Filing' button is enabled.
   - Expected: The button is enabled and clickable after successful test filing transmission.
8. Click the 'Transmit Live Filing' button.
   - Expected: A popup window appears with message 'You are about to submit a LIVE filing for Job # xxx. Are you sure you want to continue?' with 'Yes' and 'No' buttons.
9. Click 'Yes' in the Live Filing Approval popup and wait for execution status to update.
   - Expected: Popup closes and execution status updates to show 'SiFi filing completed successfully. Status: Accepted. Accession Number: [pattern] SEC Message: Subject: ACCEPTE...'.
10. Verify an Accession Number is generated and displayed (pattern: 10 digits - 2 digits - 6 digits).
    - Expected: Accession Number is present in the Execution Status field.
11. Click the 'Submission Proof' tab.
    - Expected: Tab opens and displays submission proof details.
12. Verify the Accession Number appears under the Submission Proof tab.
    - Expected: The same Accession Number from step 10 is visible in the Submission Proof section.

Notes:
- Allow generous timeouts for background processing (120s+).
- Ensure the deal has completed test filing before attempting live filing.
- Live filing transmission may require additional permissions or environment setup.

Record (sample script):
See `course2/TC/Test_Case_415056.spec.ts` for an automated implementation.

import { test, expect } from '@playwright/test';

test('Verify transmit live filing transmission is successful', async ({ page }) => {
  // 1. & 2. Locate and Open Deal
  await page.goto('url');
  await page.getByRole('button', { name: 'ABS-EE Deal Home' }).click();

  // (Assuming deal "Test filing test" with Job Number "10" exists and has completed test filing)
  const dealRow = page.getByRole('row', { name: '10 Test filing test' });
  await expect(dealRow).toBeVisible();
  await dealRow.getByRole('link').click();

  // 3. Verify Active Status
  await expect(page.getByText('Active')).toBeVisible();

  // 4. Submit Filing
  await page.getByRole('link', { name: 'Submit Filing' }).click();

  // 5. Submit Files
  await page.getByRole('link', { name: 'Submit Files' }).click();

  // 6. Transmit Test Filing
  await page.getByRole('button', { name: 'Transmit Test Filing' }).click();
  await expect(page.getByText('SiFi filing completed successfully. Status: Accepted')).toBeVisible({ timeout: 120000 });

  // 7. & 8. Verify and Click Transmit Live Filing
  const liveFilingBtn = page.getByRole('button', { name: 'Transmit Live Filing' });
  await expect(liveFilingBtn).toBeEnabled();
  await liveFilingBtn.click();

  // 9. Confirm Live Filing Popup
  await expect(page.getByText(/You are about to submit a LIVE filing/)).toBeVisible();
  await page.getByRole('button', { name: 'Yes' }).click();

  // 10. Wait for Live Filing Completion
  await expect(page.getByText('SiFi filing completed successfully. Status: Accepted')).toBeVisible({ timeout: 120000 });

  // 11. & 12. Verify Accession Number
  await expect(page.getByText(/Accession Number: \d{10}-\d{2}-\d{6}/)).toBeVisible();
  await page.getByText('Submission Proof').click();
  await expect(page.getByText(/Accession Number: \d{10}-\d{2}-\d{6}/)).toBeVisible();
});