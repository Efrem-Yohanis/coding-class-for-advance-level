Test name
415057	Test Case	Verify that the scheduled live filing transmission succeeded

Manual test case - Steps and Expected Results

Precondition: User is logged in (shared steps 413501) and has access to the ABS-EE Deal Home page. A deal with uploaded ABSEE files exists or will be created during the test.

Clean, step-by-step procedure:
1. From the ABS-EE Deal Home, locate the target deal using Job Number or Deal Name.
   - Expected: The deal row is visible and contains 'View' and 'Delete' actions.
2. Click the 'View' link for the deal to open the Deal Details page.
   - Expected: The page opens and shows headings like 'FILE UPLOAD DETAILS' or 'Files'.
3. Verify the status at the top of the page is 'Active'. If status is loading, open the 'SEC' tab to ensure authentication tokens are populated.
   - Expected: Status reads 'Active' or SEC tab tokens are present and valid.
4. In the SEC tab, ensure required SEC fields are populated and save (Submission Contact, Filer CIK, Filer CCC, ABS-EE File Number, Depositor CIK, Sponsor CIK, Asset Class, Start/End Period).
   - Expected: Fields save successfully and a 'Saved successfully' confirmation appears.
5. Return to the Deal page and click 'Upload', then upload ABSEE zip and/or individual files.
   - Expected: Files appear in the upload queue and upload action completes without error.
6. Click 'Perform Validation' and wait for validation results to finish.
   - Expected: Validation results are shown (e.g., 'Validation Results' link or 'CompletedSuccessfully').
7. Click 'Submission Proof' and generate submission proof as required.
   - Expected: Submission proof is generated and available for download or review.
8. Check the 'Schedule Filing' checkbox.
   - Expected: A confirmation popup appears asking 'Are you sure you want to schedule this filing?' with 'Yes' and 'No' buttons.
9. Click 'Yes' in the popup to confirm; the checkbox becomes checked and the 'Transmit Live Filing' button label changes to 'Schedule Live Filing'.
   - Expected: Popup closes, checkbox is checked, and button label updates.
10. Click the 'Schedule Live Filing' button to open scheduling dialog.
    - Expected: Dialog header 'Schedule Live Filing' is displayed with 'Schedule Live Filing' and 'Cancel' buttons.
11. Enter required fields (Job Number, Filer CIK) and select a future date/time to schedule.
    - Expected: The 'Schedule Live Filing' button is enabled when required fields are filled and time is in the future.
12. Click 'Schedule Live Filing' in the dialog to confirm schedule.
    - Expected: Dialog closes and a message like 'A LIVE filing is scheduled' appears.
13. After the scheduled time elapses, check 'Execution Status' and confirm completion.
    - Expected: Execution Status shows 'SiFi filing completed successfully' and 'Status: Accepted'.
14. Verify an Accession Number is generated and displayed (pattern: 10 digits - 2 digits - 6 digits).
    - Expected: Accession Number is present in the UI and under 'Submission Proof' tab.

Notes:
- Allow generous timeouts for background processing (120s+).
- Scheduling live filings may require special environment permissions; coordinate with test infra team.

Record (sample script):
See `course2/Test_Case_415057.spec.ts` for an automated implementation.

import { test, expect } from '@playwright/test';

test('Verify that the scheduled live filing transmission succeeded', async ({ page }) => {
  // 1. & 2. Locate and Open Deal
  await page.goto('https://13f-qa.azurewebsites.net/');
  await page.getByRole('button', { name: 'ABS-EE Deal Home' }).click();
  
  // Locating deal row by Job Number/Name
  const dealRow = page.getByRole('row', { name: '10 Test filing test' });
  await expect(dealRow).toBeVisible();
  await dealRow.getByRole('link').click();

  // 3. & 4. Populate SEC Details & Verification
  await expect(page.getByText('Active')).toBeVisible();
  await page.getByRole('link', { name: 'SEC' }).click();
  
  // Fill required fields (Shared identifiers from recording)
  await page.getByRole('spinbutton').first().fill('0000990461'); // Filer CIK
  await page.getByRole('textbox').nth(4).fill('2trains*');       // Filer CCC
  await page.getByRole('textbox').nth(5).fill('002-12345');      // ABS-EE File Number
  await page.getByRole('spinbutton').nth(1).fill('0000990600'); // Depositor CIK
  await page.getByRole('spinbutton').nth(2).fill('0000990458'); // Sponsor CIK
  
  await page.getByText('Select...').click();
  await page.getByText('Auto leases', { exact: true }).click();
  
  // Set Dates (Start/End Period)
  await page.locator('.react-datepicker__input-container > .form-control').first().fill('08-01-2024');
  await page.locator('div:nth-child(2) > .react-datepicker-wrapper > .react-datepicker__input-container > .form-control').fill('09-30-2024');
  
  await page.locator('input[type="email"]').first().fill('biniyam.a.gebeyehu@dfinsolutions.com');
  await page.getByRole('button', { name: 'Save' }).click();
  await expect(page.getByText('Saved successfully')).toBeVisible();

  // 5. Upload Files
  await page.getByRole('link', { name: 'Back to Deal' }).click();
  await page.getByRole('button', { name: 'Upload' }).setInputFiles([
    'lease24babsee.htm', 
    'lease24bex102.xml', 
    'lease24bex103.xml'
  ]);

  // 6. & 7. Perform Validation & Submission Proof
  await page.getByRole('button', { name: 'Perform Validation' }).click();
  await expect(page.getByText('CompletedSuccessfully')).toBeVisible({ timeout: 120000 });
  
  await page.getByText('Submission Proof').click();
  await page.getByRole('button', { name: 'Create' }).click();

  // 8. & 9. Enable Scheduling
  await page.getByRole('link', { name: 'Submit Filing' }).click();
  await page.getByText('Schedule Filing').click();
  await page.getByRole('button', { name: 'Yes' }).click(); // Confirm prompt
  
  // 10. & 11. Open Schedule Live Filing Dialog
  // Note: Transmit button label changes to 'Schedule Live Filing'
  await page.getByRole('button', { name: 'Schedule Live Filing' }).click();

  // Fill Scheduling Modal
  await page.getByRole('spinbutton').fill('0000990461'); // Filer CIK
  await page.getByRole('textbox').nth(1).fill('Test Filing TEST'); // Deal Name
  
  // Set Future Time (adjusting based on recorded format)
  await page.getByRole('textbox').first().fill('01/14/2026 10:00 PM');

  // 12. Confirm Schedule with Live Warning
  await page.getByRole('button', { name: 'Schedule Live Filing' }).filter({ hasText: 'Schedule' }).click();
  
  // Handle the "WARNING!" popup specifically for LIVE filings
  await expect(page.getByText('WARNING!')).toBeVisible();
  await expect(page.getByText(/You are scheduling a LIVE/)).toBeVisible();
  await page.getByRole('button', { name: 'Schedule LIVE Filing' }).click();

  // 13. & 14. Verification after time elapsed
  await expect(page.getByRole('heading', { name: 'A LIVE filing is scheduled' })).toBeVisible();
  
  // Waiting for background job processing (generous timeout)
  await expect(page.getByText('CompletedSuccessfully : SiFi')).toBeVisible({ timeout: 180000 });
  
  // Accession Number Check (Pattern: 10-2-6)
  const accession = page.getByText(/\d{10}-\d{2}-\d{6}/);
  await expect(accession).toBeVisible();
});